<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit User | Cubix</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/darkMode.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        body {
            display: flex;
            flex-direction: column;
            position: relative;
            min-height: auto;
        }
    </style>
</head>
<body id="body">
    <!-- Form for Logout -->
    <form id="logout-form" action="{{ url_for('logout') }}" method="post" style="display: none;">
        <input type="hidden" name="logout" value="true">
    </form>
    <!-- End of Form for Logout -->

    <!-- Main Menu -->
    <main>
        <div class="user-manager-container">
            <div class="side-menu">
                <a href="/dashboard" title="Dashboard"><span class="material-symbols-outlined home">widgets</span></a>
                <a href="/users-manager" class="active active-users" title="Users Management"><span class="material-symbols-outlined users">account_circle</span></a>
                <a href="" title="Warehouse"><span class="material-symbols-outlined warehouse">warehouse</span></a>
                <a href="" title="Stock"><span class="material-symbols-outlined inventory">inventory_2</span></a>
                <a href="" title="Shipping"><span class="material-symbols-outlined shipping">local_shipping</span></a>
                <a href="" title="Orders"><span class="material-symbols-outlined order">package_2</span></a>
                <a href="" title="Climate Controls"><span class="material-symbols-outlined ac">ac_unit</span></a>
                <a href="" title="Payments"><span class="material-symbols-outlined payments">payments</span></a>
                <a href="" title="Messages" class="messages-a"><span class="material-symbols-outlined mail">mail</span><span class="mesage-count">10</span></a>
                <a href="" title="Settings"><span class="material-symbols-outlined settings">manufacturing</span></a>
                <a href="#" onclick="document.getElementById('logout-form').submit();" title="Logout"><span class="material-symbols-outlined users">logout</span></a>
            </div>

            <div class="manager-new-registration">
                <h2>Edit User Profile</h2>
                <p>Update the account details below.</p>

                <form action="{{ url_for('edit_user', user_id=user_to_edit.id) }}" method="POST">
                    <div class="manager-new-registration-inner">
                        <div class="new-register-user-form">
                            <div class="manager-new-registration-input">
                                <div class="manager-new-registration-label-input">
                                    <label for="username">Username</label>
                                    <input type="text" name="username"  value="{{ user_to_edit.username }}">
                                </div>

                                <div class="manager-new-registration-label-input">
                                    <label for="password">Password</label>
                                    <button class="edit-password-btn-hidden" data-user-id="{{ user_to_edit.id }}" onclick="resetPassword(this)">Initiate Password Reset</button> 
                                </div>
                            </div>

                            <div class="manager-new-registration-input">
                                <div class="manager-new-registration-label-input">
                                    <label for="name">Name</label>
                                    <input type="text" name="name"  value="{{ user_to_edit.name }}">
                                </div>

                                <div class="manager-new-registration-label-input">
                                    <label for="nif">NIF</label>
                                    <input type="text" name="nif"  value="{{ user_to_edit.nif }}">
                                </div>
                            </div>

                            <div class="manager-new-registration-input">
                                <div class="manager-new-registration-label-input">
                                    <label for="cellphone">Cellphone</label>
                                    <input type="text" name="cellphone"  value="{{ user_to_edit.cellphone }}">
                                </div>

                                <div class="manager-new-registration-label-input">
                                    <label for="email">Email</label>
                                    <input type="email" name="email"  value="{{ user_to_edit.email }}">
                                </div>
                            </div>

                            <div class="manager-new-registration-input">
                                <div class="manager-new-registration-label-input">
                                    <label for="role">Role</label>
                                    <select name="role" id="role">
                                        <option value="" disabled>Select role</option>
                                        <option value="Chief Executive Officer (CEO)" {% if user_to_edit.role == "Chief Executive Officer (CEO)" %}selected{% endif %}>Chief Executive Officer (CEO)</option>
                                        <option value="Chief Operating Officer (COO)" {% if user_to_edit.role == "Chief Operating Officer (COO)" %}selected{% endif %}>Chief Operating Officer (COO)</option>
                                        <option value="Chief Financial Officer (CFO)" {% if user_to_edit.role == "Chief Financial Officer (CFO)" %}selected{% endif %}>Chief Financial Officer (CFO)</option>
                                        <option value="Chief Technology Officer (CTO)" {% if user_to_edit.role == "Chief Technology Officer (CTO)" %}selected{% endif %}>Chief Technology Officer (CTO)</option>
                                        <option value="Chief Marketing Officer (CMO)" {% if user_to_edit.role == "Chief Marketing Officer (CMO)" %}selected{% endif %}>Chief Marketing Officer (CMO)</option>
                                        <option value="Chief Human Resources Officer (CHRO)" {% if user_to_edit.role == "Chief Human Resources Officer (CHRO)" %}selected{% endif %}>Chief Human Resources Officer (CHRO)</option>
                                        <option value="Vice President (VP) of Operations" {% if user_to_edit.role == "Vice President (VP) of Operations" %}selected{% endif %}>Vice President (VP) of Operations</option>
                                        <option value="Operations Manager" {% if user_to_edit.role == "Operations Manager" %}selected{% endif %}>Operations Manager</option>
                                        <option value="Sales Manager" {% if user_to_edit.role == "Sales Manager" %}selected{% endif %}>Sales Manager</option>
                                        <option value="IT Manager" {% if user_to_edit.role == "IT Manager" %}selected{% endif %}>IT Manager</option>
                                        <option value="Warehouse Manager" {% if user_to_edit.role == "Warehouse Manager" %}selected{% endif %}>Warehouse Manager</option>
                                        <option value="Logistics Manager" {% if user_to_edit.role == "Logistics Manager" %}selected{% endif %}>Logistics Manager</option>
                                        <option value="IT Specialist" {% if user_to_edit.role == "IT Specialist" %}selected{% endif %}>IT Specialist</option>
                                        <option value="Warehouse Supervisor" {% if user_to_edit.role == "Warehouse Supervisor" %}selected{% endif %}>Warehouse Supervisor</option>
                                        <option value="Logistics Coordinator" {% if user_to_edit.role == "Logistics Coordinator" %}selected{% endif %}>Logistics Coordinator</option>
                                        <option value="Warehouse Worker" {% if user_to_edit.role == "Warehouse Worker" %}selected{% endif %}>Warehouse Worker</option>
                                        <option value="Production Worker" {% if user_to_edit.role == "Production Worker" %}selected{% endif %}>Production Worker</option>
                                        <option value="Logistics Assistant" {% if user_to_edit.role == "Logistics Assistant" %}selected{% endif %}>Logistics Assistant</option>
                                        <option value="Lead Software Engineer" {% if user_to_edit.role == "Lead Software Engineer" %}selected{% endif %}>Lead Software Engineer</option>
                                        <option value="Senior Software Engineer" {% if user_to_edit.role == "Senior Software Engineer" %}selected{% endif %}>Senior Software Engineer</option>
                                        <option value="Junior Software Developer" {% if user_to_edit.role == "Junior Software Developer" %}selected{% endif %}>Junior Software Developer</option>
                                    </select>
                                </div>

                                <div class="manager-new-registration-label-input">
                                    <label for="user_type">User Type</label>
                                    <select name="user_type" id="user_type">
                                        <option value="" disabled>Select user type</option>
                                        <option value="Admin" {% if user_to_edit.user_type == "Admin" %}selected{% endif %}>Admin</option>
                                        <option value="Manager" {% if user_to_edit.user_type == "Manager" %}selected{% endif %}>Manager</option>
                                        <option value="Employee" {% if user_to_edit.user_type == "Employee" %}selected{% endif %}>Employee</option>
                                        <option value="Client" {% if user_to_edit.user_type == "Client" %}selected{% endif %}>Client</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="edit-user-submit-btn">Save</button>
                </form>
            </div>
        </div>
    </main>
    <script src="/static/js/main.js"></script>
</body>
</html>